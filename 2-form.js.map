{"version":3,"file":"2-form.js","sources":["../src/js/2-form.js"],"sourcesContent":["import throttle from 'lodash.throttle';\n\nconst formEl = document.querySelector('.feedback-form');\nformEl.addEventListener('input', throttle(onInput, 500));\nformEl.addEventListener('submit', submitForm);\n\nconst FEEDBACK_FORM_KEY = 'feedback-form-state';\nlet data = {};\n\nconst onLoad = () => {\n  try {\n    const dataJSON = localStorage.getItem(FEEDBACK_FORM_KEY);\n    if (!dataJSON) return;\n    data = JSON.parse(dataJSON);\n    Object.entries(data).forEach(([key, val]) => {\n      formEl.elements[key].value = val;\n    });\n  } catch (err) {\n    console.log(err.message);\n  }\n};\n\nwindow.addEventListener('load', onLoad);\n\nfunction onInput(e) {\n  data[e.target.name] = e.target.value.trim();\n\n  setToLocalStorage();\n}\nfunction submitForm(e) {\n  e.preventDefault();\n\n  console.log(data);\n\n  data = {};\n\n  formEl.reset();\n\n  localStorage.removeItem(FEEDBACK_FORM_KEY);\n}\n\nfunction setToLocalStorage() {\n  localStorage.setItem(FEEDBACK_FORM_KEY, JSON.stringify(data));\n}\n"],"names":["formEl","throttle","onInput","submitForm","FEEDBACK_FORM_KEY","data","onLoad","dataJSON","key","val","err","e","setToLocalStorage"],"mappings":"wIAEA,MAAMA,EAAS,SAAS,cAAc,gBAAgB,EACtDA,EAAO,iBAAiB,QAASC,EAASC,EAAS,GAAG,CAAC,EACvDF,EAAO,iBAAiB,SAAUG,CAAU,EAE5C,MAAMC,EAAoB,sBAC1B,IAAIC,EAAO,CAAA,EAEX,MAAMC,EAAS,IAAM,CACnB,GAAI,CACF,MAAMC,EAAW,aAAa,QAAQH,CAAiB,EACvD,GAAI,CAACG,EAAU,OACfF,EAAO,KAAK,MAAME,CAAQ,EAC1B,OAAO,QAAQF,CAAI,EAAE,QAAQ,CAAC,CAACG,EAAKC,CAAG,IAAM,CAC3CT,EAAO,SAASQ,CAAG,EAAE,MAAQC,CACnC,CAAK,CACF,OAAQC,EAAK,CACZ,QAAQ,IAAIA,EAAI,OAAO,CACxB,CACH,EAEA,OAAO,iBAAiB,OAAQJ,CAAM,EAEtC,SAASJ,EAAQS,EAAG,CAClBN,EAAKM,EAAE,OAAO,IAAI,EAAIA,EAAE,OAAO,MAAM,OAErCC,GACF,CACA,SAAST,EAAWQ,EAAG,CACrBA,EAAE,eAAc,EAEhB,QAAQ,IAAIN,CAAI,EAEhBA,EAAO,CAAA,EAEPL,EAAO,MAAK,EAEZ,aAAa,WAAWI,CAAiB,CAC3C,CAEA,SAASQ,GAAoB,CAC3B,aAAa,QAAQR,EAAmB,KAAK,UAAUC,CAAI,CAAC,CAC9D"}